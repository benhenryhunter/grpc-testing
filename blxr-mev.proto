syntax = "proto3";

option go_package = "github.com/bloXroute-Labs/bsc-client/miner";

// The gateway service definition.
package gateway;
service Gateway {
  rpc ShortIDs (TxHashListRequest) returns (ShortIDListReply) {}
  rpc ProposedBlock (ProposedBlockRequest) returns (ProposedBlockReply) {}

}

message TxHashListRequest {
  string auth_header = 1;
  repeated bytes txHashes = 2;
}

message ShortIDListReply {
  repeated uint32 shortIDs = 1;
}

message ProposedBlockRequest {
  string auth_header = 1;
  string validatorHttpAddress = 2;
  string namespace = 3;
  uint64 blockNumber = 4;
  string prevBlockHash = 5;
  string blockReward = 6;
  uint64 gasLimit = 7;
  uint64 gasUsed = 8;
  repeated compressTx payload = 9;
}

message compressTx {
  bytes rawData = 1;
  uint32 shortID = 2;
}

message ProposedBlockReply {
  string validatorReply = 1;
  int64 validatorReplyTime = 2;
}